import{ae as A,af as L,ag as B,x as g,r as h,C as P,j as D,bf as i,bt as H,bA as k,bq as W,bB as b,B as G,be as z,bv as U,bC as _,bD as R,bE as F}from"../app.js";import{d as q,A as O}from"./dayjs.min-CgYF6zh8.js";import{F as J}from"./index-0M8oz1V7.js";const V=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:a,colorSplit:r,lineWidth:n,textPaddingInline:c,orientationMargin:l,verticalMarginInline:s}=e;return{[t]:Object.assign(Object.assign({},B(e)),{borderBlockStart:`${g(n)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${g(n)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${g(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${g(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${g(n)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${l} * 100%)`},"&::after":{width:`calc(100% - ${l} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${l} * 100%)`},"&::after":{width:`calc(${l} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:c},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${g(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:r,borderStyle:"dotted",borderWidth:`${g(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:a}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:a}}})}},X=e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),K=A("Divider",e=>{const t=L(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[V(t)]},X,{unitless:{orientationMargin:!0}});var Q=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};const Z=e=>{const{getPrefixCls:t,direction:a,divider:r}=h.useContext(P),{prefixCls:n,type:c="horizontal",orientation:l="center",orientationMargin:s,className:m,rootClassName:p,children:u,dashed:y,variant:d="solid",plain:f,style:v}=e,x=Q(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),o=t("divider",n),[$,E,I]=K(o),S=!!u,w=l==="left"&&s!=null,M=l==="right"&&s!=null,T=D(o,r==null?void 0:r.className,E,I,`${o}-${c}`,{[`${o}-with-text`]:S,[`${o}-with-text-${l}`]:S,[`${o}-dashed`]:!!y,[`${o}-${d}`]:d!=="solid",[`${o}-plain`]:!!f,[`${o}-rtl`]:a==="rtl",[`${o}-no-default-orientation-margin-left`]:w,[`${o}-no-default-orientation-margin-right`]:M},m,p),C=h.useMemo(()=>typeof s=="number"?s:/^\d+$/.test(s)?Number(s):s,[s]),Y=Object.assign(Object.assign({},w&&{marginLeft:C}),M&&{marginRight:C});return $(h.createElement("div",Object.assign({className:T,style:Object.assign(Object.assign({},r==null?void 0:r.style),v)},x,{role:"separator"}),u&&c!=="vertical"&&h.createElement("span",{className:`${o}-inner-text`,style:Y},u)))},j=e=>{if(e===null)return e;const t=new Date(e);return isNaN(t.getTime())?null:q(t)},ee=({data:e})=>{var t,a;return i.jsxs("div",{className:te,children:[i.jsx(O,{src:e.authorUser.avatar}),i.jsxs("div",{className:"right",children:[i.jsxs("div",{className:"info",children:[i.jsx("div",{className:"name",children:e.authorUser.name}),i.jsx("div",{className:"datetime",children:e.createdAt===e.updatedAt?(t=j(e.createdAt))==null?void 0:t.format("YYYY-MM-DD HH:mm 등록함"):(a=j(e.updatedAt))==null?void 0:a.format("YYYY-MM-DD HH:mm 수정함")})]}),i.jsx("div",{dangerouslySetInnerHTML:{__html:e.content??""}})]})]})},te=H`
  display: flex;
  flex-direction: row;
  gap: 8px;
  margin-bottom: 8px;

  .right {
    flex-grow: 1;
  }

  .info {
    width: 100%;
    display: flex;
    justify-content: space-between;
  }

  img {
    max-width: clamp(10vw, 50%, 30vw);
  }
`,{Paragraph:re}=b;function ne({postId:e}){const{data:t,isSuccess:a,error:r}=k(e),n=W();return h.useEffect(()=>{console.debug({postId:e})},[e]),isNaN(e)?i.jsx("div",{children:"postId가 없습니다."}):r?i.jsx("div",{children:JSON.stringify(r)}):a?i.jsx("div",{children:i.jsxs(b,{children:[i.jsxs(re,{type:"secondary",children:["댓글",i.jsx(G,{type:"link",onClick:()=>n("comments/create"),children:"댓글 달기"})]}),t.map(c=>i.jsx(ee,{data:c},c.id))]})}):i.jsx(z,{})}const{Title:ie,Text:N}=b;function de(){var u,y;const e=U(),t=Number(e.postId),[a,r]=h.useState(""),{data:n,isSuccess:c,isError:l,error:s}=_(t),m=h.useMemo(()=>{const d=n==null?void 0:n.content,f=document.createElement("div");return typeof d=="string"&&d.length&&(f.innerHTML=d),f},[n]),p=h.useMemo(()=>Array.from(m.querySelectorAll("img")),[m]);return h.useEffect(()=>{p.forEach(d=>{var v;const f=d.getAttribute("src")??"";if(f){const x=Number((v=f.match(/^\/*(\d+)$/))==null?void 0:v[1]);isNaN(x)===!1&&x>0&&(d.src="/loading.gif",r(m.innerHTML),R(x).then(o=>{if(o instanceof Blob){console.debug(o);const $=URL.createObjectURL(o);d.src=$,console.debug(m.innerHTML),r(m.innerHTML)}}).catch(o=>{console.error(o),d.src="/no-image.png",r(m.innerHTML)}))}})},[p,r]),console.debug({isSuccess:c,isError:l}),l?i.jsx("pre",{children:JSON.stringify(s)}):c?i.jsxs("div",{className:oe,children:[i.jsxs(b,{style:{minHeight:"30vh"},children:[i.jsx(ie,{level:3,children:n.title}),i.jsxs(J,{align:"flex-end",justify:"flex-end",children:[i.jsx(O,{src:n.authorUser.avatar}),i.jsx(N,{type:"secondary",children:n.authorUser.name}),i.jsx("div",{style:{width:24}}),i.jsx(N,{type:"secondary",children:n.createdAt===n.updatedAt?(u=j(n.createdAt))==null?void 0:u.format("YYYY-MM-DD HH:mm 등록"):(y=j(n.updatedAt))==null?void 0:y.format("YYYY-MM-DD HH:mm 등록")})]}),i.jsx("div",{dangerouslySetInnerHTML:{__html:a}})]}),i.jsx(Z,{}),i.jsx(F,{}),i.jsx(b,{children:i.jsx(ne,{postId:t})})]}):i.jsx(z,{})}const oe=H`
  margin: 2em;
`;export{de as default};
