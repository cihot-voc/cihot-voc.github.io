import{ad as A,ae as L,af as B,x as u,r as h,C as P,j as D,be as r,bs as H,by as k,bp as W,bz as p,B as G,bd as O,bu as R,bA as U,bB as _,bC as F}from"../app.js";import{d as J,A as E}from"./dayjs.min-QZ-W2MMI.js";import{F as V}from"./index-B68EXSTp.js";const q=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:s,colorSplit:n,lineWidth:i,textPaddingInline:o,orientationMargin:d,verticalMarginInline:l}=e;return{[t]:Object.assign(Object.assign({},B(e)),{borderBlockStart:`${u(i)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:l,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${u(i)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${u(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${u(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${u(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${d} * 100%)`},"&::after":{width:`calc(100% - ${d} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${d} * 100%)`},"&::after":{width:`calc(${d} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${u(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:n,borderStyle:"dotted",borderWidth:`${u(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:s}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:s}}})}},X=e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),K=A("Divider",e=>{const t=L(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[q(t)]},X,{unitless:{orientationMargin:!0}});var Q=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const Z=e=>{const{getPrefixCls:t,direction:s,divider:n}=h.useContext(P),{prefixCls:i,type:o="horizontal",orientation:d="center",orientationMargin:l,className:$,rootClassName:m,children:x,dashed:y,variant:b="solid",plain:c,style:f}=e,j=Q(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),a=t("divider",i),[g,S,I]=K(a),w=!!x,M=d==="left"&&l!=null,C=d==="right"&&l!=null,T=D(a,n==null?void 0:n.className,S,I,`${a}-${o}`,{[`${a}-with-text`]:w,[`${a}-with-text-${d}`]:w,[`${a}-dashed`]:!!y,[`${a}-${b}`]:b!=="solid",[`${a}-plain`]:!!c,[`${a}-rtl`]:s==="rtl",[`${a}-no-default-orientation-margin-left`]:M,[`${a}-no-default-orientation-margin-right`]:C},$,m),N=h.useMemo(()=>typeof l=="number"?l:/^\d+$/.test(l)?Number(l):l,[l]),Y=Object.assign(Object.assign({},M&&{marginLeft:N}),C&&{marginRight:N});return g(h.createElement("div",Object.assign({className:T,style:Object.assign(Object.assign({},n==null?void 0:n.style),f)},j,{role:"separator"}),x&&o!=="vertical"&&h.createElement("span",{className:`${a}-inner-text`,style:Y},x)))},v=e=>{if(e===null)return e;const t=new Date(e);return isNaN(t.getTime())?null:J(t)},ee=({data:e})=>{var t,s;return r.jsxs("div",{className:te,children:[r.jsx(E,{src:e.authorUser.avatar}),r.jsxs("div",{className:"right",children:[r.jsxs("div",{className:"info",children:[r.jsx("div",{className:"name",children:e.authorUser.name}),r.jsx("div",{className:"datetime",children:e.createdAt===e.updatedAt?(t=v(e.createdAt))==null?void 0:t.format("YYYY-MM-DD HH:mm 등록함"):(s=v(e.updatedAt))==null?void 0:s.format("YYYY-MM-DD HH:mm 수정함")})]}),r.jsx("div",{dangerouslySetInnerHTML:{__html:e.content??""}})]})]})},te=H`
  display: flex;
  flex-direction: row;
  gap: 8px;
  margin-bottom: 8px;

  .right {
    flex-grow: 1;
  }

  .info {
    width: 100%;
    display: flex;
    justify-content: space-between;
  }

  img {
    max-width: clamp(10vw, 50%, 30vw);
  }
`,{Paragraph:re}=p;function ne({postId:e}){const{data:t,isSuccess:s,error:n}=k(e),i=W();return h.useEffect(()=>{console.debug({postId:e})},[e]),isNaN(e)?r.jsx("div",{children:"postId가 없습니다."}):n?r.jsx("div",{children:JSON.stringify(n)}):s?r.jsx("div",{children:r.jsxs(p,{children:[r.jsxs(re,{type:"secondary",children:["댓글",r.jsx(G,{type:"link",onClick:()=>i("comments/create"),children:"댓글 달기"})]}),t.map(o=>r.jsx(ee,{data:o},o.id))]})}):r.jsx(O,{})}const{Title:ie,Text:z}=p;function de(){var y,b;const e=R(),t=Number(e.postId),s=h.useRef(null),[n,i]=h.useState(""),{data:o,isSuccess:d,isError:l,error:$}=U(t),m=h.useMemo(()=>{const c=o==null?void 0:o.content,f=document.createElement("div");return typeof c=="string"&&c.length&&(f.innerHTML=c),f},[o]),x=h.useMemo(()=>Array.from(m.querySelectorAll("img")),[m]);return h.useEffect(()=>{x.forEach(c=>{var j;const f=c.getAttribute("src")??"";if(f){const a=Number((j=f.match(/^\/*(\d+)$/))==null?void 0:j[1]);isNaN(a)===!1&&a>0&&(c.src="/loading.gif",i(m.innerHTML),_(a).then(g=>{if(g instanceof Blob){console.debug(g);const S=URL.createObjectURL(g);c.src=S,console.debug(m.innerHTML),i(m.innerHTML)}}).catch(g=>{console.error(g),c.src="/no-image.png",i(m.innerHTML)}))}})},[x,i]),console.debug({isSuccess:d,isError:l}),l?r.jsx("pre",{children:JSON.stringify($)}):d?r.jsxs("div",{className:oe,children:[r.jsxs(p,{style:{minHeight:"30vh"},children:[r.jsx(ie,{level:3,children:o.title}),r.jsxs(V,{align:"flex-end",justify:"flex-end",children:[r.jsx(E,{src:o.authorUser.avatar}),r.jsx(z,{type:"secondary",children:o.authorUser.name}),r.jsx("div",{style:{width:24}}),r.jsx(z,{type:"secondary",children:o.createdAt===o.updatedAt?(y=v(o.createdAt))==null?void 0:y.format("YYYY-MM-DD HH:mm 등록"):(b=v(o.updatedAt))==null?void 0:b.format("YYYY-MM-DD HH:mm 등록")})]}),r.jsx("div",{ref:s}),r.jsx("div",{dangerouslySetInnerHTML:{__html:n}})]}),r.jsx(Z,{}),r.jsx(F,{}),r.jsx(p,{children:r.jsx(ne,{postId:t})})]}):r.jsx(O,{})}const oe=H`
  margin: 2em;
`;export{de as default};
