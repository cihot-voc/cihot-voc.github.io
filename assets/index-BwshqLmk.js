import{r as l,aW as w,aX as Ie,B as D,aY as ee,aZ as P,a_ as Ne,a$ as Se,b0 as H,b1 as te,b2 as ke,aq as ne,C as A,ae as oe,b3 as le,c as T,b4 as Fe,b5 as Q,ar as Re,ak as Be,b6 as Me,b7 as Le,aP as z,b8 as ze,b9 as Ae,ba as _e,bb as We,bc as De,u as He,am as re,bd as Ve,be as qe,bf as Xe,bg as Qe,bh as Ze,bi as Ge,bj as Ye,bk as Ue,bl as Je,bm as Ke,bn as et}from"../web.js";import{w as tt}from"./dropdown-BySDfBJe.js";function nt(){const[e,n]=l.useState([]),r=l.useCallback(t=>(n(o=>[].concat(w(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,r]}function _(e){return!!(e!=null&&e.then)}const se=e=>{const{type:n,children:r,prefixCls:t,buttonProps:o,close:a,autoFocus:C,emitEvent:m,isSilent:c,quitOnNullishReturnValue:u,actionFn:s}=e,f=l.useRef(!1),g=l.useRef(null),[v,y]=Ie(!1),i=function(){a==null||a.apply(void 0,arguments)};l.useEffect(()=>{let d=null;return C&&(d=setTimeout(()=>{var p;(p=g.current)===null||p===void 0||p.focus({preventScroll:!0})})),()=>{d&&clearTimeout(d)}},[]);const x=d=>{_(d)&&(y(!0),d.then(function(){y(!1,!0),i.apply(void 0,arguments),f.current=!1},p=>{if(y(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(p)}))},b=d=>{if(f.current)return;if(f.current=!0,!s){i();return}let p;if(m){if(p=s(d),u&&!_(p)){f.current=!1,i(d);return}}else if(s.length)p=s(a),f.current=!1;else if(p=s(),!_(p)){i();return}x(p)};return l.createElement(D,Object.assign({},ee(n),{onClick:b,loading:v,prefixCls:t},o,{ref:g}),r)},B=P.createContext({}),{Provider:ae}=B,Z=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:r,isSilent:t,mergedOkCancel:o,rootPrefixCls:a,close:C,onCancel:m,onConfirm:c}=l.useContext(B);return o?P.createElement(se,{isSilent:t,actionFn:m,close:function(){C==null||C.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${a}-btn`},r):null},G=()=>{const{autoFocusButton:e,close:n,isSilent:r,okButtonProps:t,rootPrefixCls:o,okTextLocale:a,okType:C,onConfirm:m,onOk:c}=l.useContext(B);return P.createElement(se,{isSilent:r,type:C||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),m==null||m(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},a)},ot=()=>Ne()&&window.document.documentElement;function Y(){}const lt=l.createContext({add:Y,remove:Y});function rt(e){const n=l.useContext(lt),r=l.useRef();return Se(o=>{if(o){const a=e?o.querySelector(e):o;n.add(a),r.current=a}else n.remove(r.current)})}const U=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:r}=l.useContext(B);return P.createElement(D,Object.assign({onClick:r},e),n)},J=()=>{const{confirmLoading:e,okButtonProps:n,okType:r,okTextLocale:t,onOk:o}=l.useContext(B);return P.createElement(D,Object.assign({},ee(r),{loading:e,onClick:o},n),t)};function ce(e,n){return P.createElement("span",{className:`${e}-close-x`},n||P.createElement(ne,{className:`${e}-close-icon`}))}const ie=e=>{const{okText:n,okType:r="primary",cancelText:t,confirmLoading:o,onOk:a,onCancel:C,okButtonProps:m,cancelButtonProps:c,footer:u}=e,[s]=H("Modal",te()),f=n||(s==null?void 0:s.okText),g=t||(s==null?void 0:s.cancelText),v={confirmLoading:o,okButtonProps:m,cancelButtonProps:c,okTextLocale:f,cancelTextLocale:g,okType:r,onOk:a,onCancel:C},y=P.useMemo(()=>v,w(Object.values(v)));let i;return typeof u=="function"||typeof u>"u"?(i=P.createElement(P.Fragment,null,P.createElement(U,null),P.createElement(J,null)),typeof u=="function"&&(i=u(i,{OkBtn:J,CancelBtn:U})),i=P.createElement(ae,{value:y},i)):i=u,P.createElement(ke,{disabled:!1},i)};var st=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let W;const at=e=>{W={x:e.pageX,y:e.pageY},setTimeout(()=>{W=null},100)};ot()&&document.documentElement.addEventListener("click",at,!0);const ue=e=>{var n;const{getPopupContainer:r,getPrefixCls:t,direction:o,modal:a}=l.useContext(A),C=R=>{const{onCancel:S}=e;S==null||S(R)},m=R=>{const{onOk:S}=e;S==null||S(R)},{prefixCls:c,className:u,rootClassName:s,open:f,wrapClassName:g,centered:v,getContainer:y,focusTriggerAfterClose:i=!0,style:x,visible:b,width:d=520,footer:p,classNames:O,styles:h,children:I,loading:N}=e,j=st(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),E=t("modal",c),F=t(),L=oe(E),[Oe,V,Pe]=le(E,L),he=T(g,{[`${E}-centered`]:!!v,[`${E}-wrap-rtl`]:o==="rtl"}),Ee=p!==null&&!N?l.createElement(ie,Object.assign({},e,{onOk:m,onCancel:C})):null,[q,X,$e]=Fe(Q(e),Q(a),{closable:!0,closeIcon:l.createElement(ne,{className:`${E}-close-icon`}),closeIconRender:R=>ce(E,R)}),je=rt(`.${E}-content`),[Te,we]=Re("Modal",j.zIndex);return Oe(l.createElement(Be,{form:!0,space:!0},l.createElement(Me.Provider,{value:we},l.createElement(Le,Object.assign({width:d},j,{zIndex:Te,getContainer:y===void 0?r:y,prefixCls:E,rootClassName:T(V,s,Pe,L),footer:Ee,visible:f??b,mousePosition:(n=j.mousePosition)!==null&&n!==void 0?n:W,onClose:C,closable:q&&{disabled:$e,closeIcon:X},closeIcon:X,focusTriggerAfterClose:i,transitionName:z(F,"zoom",e.transitionName),maskTransitionName:z(F,"fade",e.maskTransitionName),className:T(V,u,a==null?void 0:a.className),style:Object.assign(Object.assign({},a==null?void 0:a.style),x),classNames:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.classNames),O),{wrapper:T(he,O==null?void 0:O.wrapper)}),styles:Object.assign(Object.assign({},a==null?void 0:a.styles),h),panelRef:je}),N?l.createElement(ze,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):I))))},ct=e=>{const{componentCls:n,titleFontSize:r,titleLineHeight:t,modalConfirmIconSize:o,fontSize:a,lineHeight:C,modalTitleHeight:m,fontHeight:c,confirmBodyPadding:u}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},De()),[`&${n} ${n}-body`]:{padding:u},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(m).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${He(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:r,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:a,lineHeight:C},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},it=Ae(["Modal","confirm"],e=>{const n=_e(e);return[ct(n)]},We,{order:-1e3});var ut=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};function fe(e){const{prefixCls:n,icon:r,okText:t,cancelText:o,confirmPrefixCls:a,type:C,okCancel:m,footer:c,locale:u}=e,s=ut(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=r;if(!r&&r!==null)switch(C){case"info":f=l.createElement(Qe,null);break;case"success":f=l.createElement(Xe,null);break;case"error":f=l.createElement(qe,null);break;default:f=l.createElement(Ve,null)}const g=m??C==="confirm",v=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=H("Modal"),i=u||y,x=t||(g?i==null?void 0:i.okText:i==null?void 0:i.justOkText),b=o||(i==null?void 0:i.cancelText),d=Object.assign({autoFocusButton:v,cancelTextLocale:b,okTextLocale:x,mergedOkCancel:g},s),p=l.useMemo(()=>d,w(Object.values(d))),O=l.createElement(l.Fragment,null,l.createElement(Z,null),l.createElement(G,null)),h=e.title!==void 0&&e.title!==null,I=`${a}-body`;return l.createElement("div",{className:`${a}-body-wrapper`},l.createElement("div",{className:T(I,{[`${I}-has-title`]:h})},f,l.createElement("div",{className:`${a}-paragraph`},h&&l.createElement("span",{className:`${a}-title`},e.title),l.createElement("div",{className:`${a}-content`},e.content))),c===void 0||typeof c=="function"?l.createElement(ae,{value:p},l.createElement("div",{className:`${a}-btns`},typeof c=="function"?c(O,{OkBtn:G,CancelBtn:Z}):O)):c,l.createElement(it,{prefixCls:n}))}const ft=e=>{const{close:n,zIndex:r,afterClose:t,open:o,keyboard:a,centered:C,getContainer:m,maskStyle:c,direction:u,prefixCls:s,wrapClassName:f,rootPrefixCls:g,bodyStyle:v,closable:y=!1,closeIcon:i,modalRender:x,focusTriggerAfterClose:b,onConfirm:d,styles:p}=e,O=`${s}-confirm`,h=e.width||416,I=e.style||{},N=e.mask===void 0?!0:e.mask,j=e.maskClosable===void 0?!1:e.maskClosable,E=T(O,`${O}-${e.type}`,{[`${O}-rtl`]:u==="rtl"},e.className),[,F]=Ze(),L=l.useMemo(()=>r!==void 0?r:F.zIndexPopupBase+Ge,[r,F]);return l.createElement(ue,{prefixCls:s,className:E,wrapClassName:T({[`${O}-centered`]:!!e.centered},f),onCancel:()=>{n==null||n({triggerCancel:!0}),d==null||d(!1)},open:o,title:"",footer:null,transitionName:z(g||"","zoom",e.transitionName),maskTransitionName:z(g||"","fade",e.maskTransitionName),mask:N,maskClosable:j,style:I,styles:Object.assign({body:v,mask:c},p),width:h,zIndex:L,afterClose:t,keyboard:a,centered:C,getContainer:m,closable:y,closeIcon:i,modalRender:x,focusTriggerAfterClose:b},l.createElement(fe,Object.assign({},e,{confirmPrefixCls:O})))},de=e=>{const{rootPrefixCls:n,iconPrefixCls:r,direction:t,theme:o}=e;return l.createElement(re,{prefixCls:n,iconPrefixCls:r,direction:t,theme:o},l.createElement(ft,Object.assign({},e)))},k=[];let me="";function Ce(){return me}const dt=e=>{var n,r;const{prefixCls:t,getContainer:o,direction:a}=e,C=te(),m=l.useContext(A),c=Ce()||m.getPrefixCls(),u=t||`${c}-modal`;let s=o;return s===!1&&(s=void 0),P.createElement(de,Object.assign({},e,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:m.iconPrefixCls,theme:m.theme,direction:a??m.direction,locale:(r=(n=m.locale)===null||n===void 0?void 0:n.Modal)!==null&&r!==void 0?r:C,getContainer:s}))};function M(e){const n=Je(),r=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:m,open:!0}),o;function a(){for(var u,s=arguments.length,f=new Array(s),g=0;g<s;g++)f[g]=arguments[g];if(f.some(i=>i==null?void 0:i.triggerCancel)){var y;(u=e.onCancel)===null||u===void 0||(y=u).call.apply(y,[e,()=>{}].concat(w(f.slice(1))))}for(let i=0;i<k.length;i++)if(k[i]===m){k.splice(i,1);break}Ye(r)}function C(u){clearTimeout(o),o=setTimeout(()=>{const s=n.getPrefixCls(void 0,Ce()),f=n.getIconPrefixCls(),g=n.getTheme(),v=P.createElement(dt,Object.assign({},u));Ue(P.createElement(re,{prefixCls:s,iconPrefixCls:f,theme:g},n.holderRender?n.holderRender(v):v),r)})}function m(){for(var u=arguments.length,s=new Array(u),f=0;f<u;f++)s[f]=arguments[f];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),a.apply(this,s)}}),t.visible&&delete t.visible,C(t)}function c(u){typeof u=="function"?t=u(t):t=Object.assign(Object.assign({},t),u),C(t)}return C(t),k.push(m),{destroy:m,update:c}}function ge(e){return Object.assign(Object.assign({},e),{type:"warning"})}function be(e){return Object.assign(Object.assign({},e),{type:"info"})}function ve(e){return Object.assign(Object.assign({},e),{type:"success"})}function xe(e){return Object.assign(Object.assign({},e),{type:"error"})}function pe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function mt(e){let{rootPrefixCls:n}=e;me=n}var Ct=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const gt=(e,n)=>{var r,{afterClose:t,config:o}=e,a=Ct(e,["afterClose","config"]);const[C,m]=l.useState(!0),[c,u]=l.useState(o),{direction:s,getPrefixCls:f}=l.useContext(A),g=f("modal"),v=f(),y=()=>{var d;t(),(d=c.afterClose)===null||d===void 0||d.call(c)},i=function(){var d;m(!1);for(var p=arguments.length,O=new Array(p),h=0;h<p;h++)O[h]=arguments[h];if(O.some(j=>j==null?void 0:j.triggerCancel)){var N;(d=c.onCancel)===null||d===void 0||(N=d).call.apply(N,[c,()=>{}].concat(w(O.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:i,update:d=>{u(p=>Object.assign(Object.assign({},p),d))}}));const x=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[b]=H("Modal",Ke.Modal);return l.createElement(de,Object.assign({prefixCls:g,rootPrefixCls:v},c,{close:i,open:C,afterClose:y,okText:c.okText||(x?b==null?void 0:b.okText:b==null?void 0:b.justOkText),direction:c.direction||s,cancelText:c.cancelText||(b==null?void 0:b.cancelText)},a))},bt=l.forwardRef(gt);let K=0;const vt=l.memo(l.forwardRef((e,n)=>{const[r,t]=nt();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,r)}));function xt(){const e=l.useRef(null),[n,r]=l.useState([]);l.useEffect(()=>{n.length&&(w(n).forEach(C=>{C()}),r([]))},[n]);const t=l.useCallback(a=>function(m){var c;K+=1;const u=l.createRef();let s;const f=new Promise(x=>{s=x});let g=!1,v;const y=l.createElement(bt,{key:`modal-${K}`,config:a(m),ref:u,afterClose:()=>{v==null||v()},isSilent:()=>g,onConfirm:x=>{s(x)}});return v=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),v&&k.push(v),{destroy:()=>{function x(){var b;(b=u.current)===null||b===void 0||b.destroy()}u.current?x():r(b=>[].concat(w(b),[x]))},update:x=>{function b(){var d;(d=u.current)===null||d===void 0||d.update(x)}u.current?b():r(d=>[].concat(w(d),[b]))},then:x=>(g=!0,f.then(x))}},[]);return[l.useMemo(()=>({info:t(be),success:t(ve),error:t(xe),warning:t(ge),confirm:t(pe)}),[]),l.createElement(vt,{key:"modal-holder",ref:e})]}var pt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const yt=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:o,type:a,title:C,children:m,footer:c}=e,u=pt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=l.useContext(A),f=s(),g=n||s("modal"),v=oe(f),[y,i,x]=le(g,v),b=`${g}-confirm`;let d={};return a?d={closable:o??!1,title:"",footer:"",children:l.createElement(fe,Object.assign({},e,{prefixCls:g,confirmPrefixCls:b,rootPrefixCls:f,content:m}))}:d={closable:o??!0,title:C,footer:c!==null&&l.createElement(ie,Object.assign({},e)),children:m},y(l.createElement(et,Object.assign({prefixCls:g,className:T(i,`${g}-pure-panel`,a&&b,a&&`${b}-${a}`,r,x,v)},u,{closeIcon:ce(g,t),closable:o},d)))},Ot=tt(yt);function ye(e){return M(ge(e))}const $=ue;$.useModal=xt;$.info=function(n){return M(be(n))};$.success=function(n){return M(ve(n))};$.error=function(n){return M(xe(n))};$.warning=ye;$.warn=ye;$.confirm=function(n){return M(pe(n))};$.destroyAll=function(){for(;k.length;){const n=k.pop();n&&n()}};$.config=mt;$._InternalPanelDoNotUseOrYouWillBeFired=Ot;export{$ as M};
