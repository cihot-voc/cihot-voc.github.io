import{bi as j,bB as y,bC as I,bm as v,bf as N,bn as C,r as E,bo as F,b9 as s,bk as l,br as L,B as P,bl as Q}from"../app.js";import{Q as S}from"./quill-editor-BzREhDcj.js";import{u as T,F as e}from"./index-DZjjEOTr.js";import{S as w}from"./index-Hu_4KWfa.js";import{C as A,s as m}from"./index-BUmyGOo3.js";import{I as d,j as B}from"./index-BE3p3K_8.js";function W(){const[p]=T(),h=j();console.debug("useNavigationType",y()),console.debug("useNavigation",I());const{id:r}=v(),n=r!==void 0,u=n?"put":"post",{refetch:b}=N(),{data:a}=C(),x=E.useMemo(()=>Array.isArray(a)?a.map(({id:i,name:t})=>({label:t,value:i})):[],[a]),{data:g,isLoading:c,isError:f,error:o}=F(["blog",r],async()=>l.get(`/post/${r}`),{enabled:n});return f?s.jsx("pre",{children:o==null?void 0:o.error}):c?s.jsx(w,{}):s.jsx(A,{title:`게시글 등록 ${u} ${c?"...":""}`,className:O,bordered:!0,children:s.jsxs(e,{initialValues:g,layout:"vertical",form:p,onFinish:i=>{l[u]("/post",i).then(t=>{m.success(s.jsx(L.Paragraph,{ellipsis:{rows:3},style:{maxWidth:"90vw"},children:JSON.stringify(t)})),b(),h("..")}).catch(t=>m.error(JSON.stringify(t)))},children:[s.jsx(e.Item,{name:"id",hidden:!0,children:s.jsx(d,{})}),s.jsx(e.Item,{name:"title",label:"제목",rules:[{required:!0}],children:s.jsx(d,{tabIndex:1,autoFocus:!0})}),s.jsx(e.Item,{name:"categories",initialValue:[],children:s.jsx(B.Group,{options:x})}),s.jsx(e.Item,{name:"content",label:"내용",rules:[{required:!0}],children:s.jsx(S,{theme:"snow",tabIndex:1})}),s.jsx(e.Item,{children:s.jsx(P,{htmlType:"submit",children:"저장"})})]})})}const O=Q`
  margin: 2em;
`;export{W as default};
