import{bu as j,bq as f,bL as v,bM as I,bv as N,bl as L,bw as C,r as E,bx as P,bf as s,be as w,bn as e,bs as l,bz as d,bB as F,bc as m,B as Q,bt as T}from"../app.js";import{Q as q}from"./quill-editor-Dzpk5qSp.js";import{C as A}from"./index-C7geTe0S.js";import{g as B}from"./index-CGTwVMhu.js";function V(){const[b]=j(),p=f();console.debug("useNavigationType",v()),console.debug("useNavigation",I());const{id:a}=N(),n=a!==void 0,u=n?"put":"post",{refetch:h}=L(),{data:r}=C(),x=E.useMemo(()=>Array.isArray(r)?r.map(({id:o,name:t})=>({label:t,value:o})):[],[r]),{data:g,isLoading:c,isError:y,error:i}=P(["blog",a],async()=>l.get(`/post/${a}`),{enabled:n});return y?s.jsx("pre",{children:i==null?void 0:i.error}):c?s.jsx(w,{}):s.jsx(A,{title:`게시글 등록 ${u} ${c?"...":""}`,className:M,bordered:!0,children:s.jsxs(e,{initialValues:g,layout:"vertical",form:b,onFinish:o=>{l[u]("/post",o).then(t=>{d.success(s.jsx(F.Paragraph,{ellipsis:{rows:3},style:{maxWidth:"90vw"},children:JSON.stringify(t)})),h(),p("..")}).catch(t=>d.error(JSON.stringify(t)))},children:[s.jsx(e.Item,{name:"id",hidden:!0,children:s.jsx(m,{})}),s.jsx(e.Item,{name:"title",label:"제목",rules:[{required:!0}],children:s.jsx(m,{tabIndex:1,autoFocus:!0})}),s.jsx(e.Item,{name:"categories",initialValue:[],children:s.jsx(B.Group,{options:x})}),s.jsx(e.Item,{name:"content",label:"내용",rules:[{required:!0}],children:s.jsx(q,{theme:"snow",tabIndex:1})}),s.jsx(e.Item,{children:s.jsx(Q,{htmlType:"submit",children:"저장"})})]})})}const M=T`
  margin: 2em;
`;export{V as default};
