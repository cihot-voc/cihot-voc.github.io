import{l as x,n as h,s as j,j as e,H as y,T as f,B as i,J as g,O as I,A as c}from"../web.js";import{u as C}from"./use-yup-params-8nHEo682.js";import{a as k}from"./render-CHjv3IOU.js";import{c as w}from"./index.esm-CnD8eApZ.js";import{F as s}from"./Table-DNa1AAiZ.js";import{R as A}from"./EditFilled-CAVP73L2.js";import{R}from"./DeleteFilled-CRc1QtDf.js";import"./index-CYjZiiai.js";import"./index-ejgHpRPS.js";import"./dropdown-BySDfBJe.js";import"./DownOutlined-Bre27_U7.js";import"./index-C-CKWqDQ.js";import"./index-Cq2plmkM.js";import"./useBubbleLock-Kz7pQh5h.js";import"./index-DgZBu0-b.js";function J(){const d=x(),{projectId:a}=C({projectId:w().required()}),{data:n,isLoading:l,refetch:p}=h("getChannels",()=>c.channels.getList(a),{initialData:[]}),{mutateAsync:m}=j(({projectId:r,channelId:t})=>c.channels.delete(r,t),{onSuccess:()=>{p()}}),u=[{key:"channelId",title:"ID",dataIndex:"channelId",width:50},{key:"name",title:"Name",dataIndex:"name"},{key:"updatedAt",title:"시간",dataIndex:"updatedAt",render:k,width:140},{key:"actions",width:80,render:(r,{channelId:t})=>e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"link",onClick:o=>{o.stopPropagation(),d(`/projects/${a}/channels/${t}/update`)},children:e.jsx(A,{})}),e.jsx(i,{type:"link",danger:!0,onClick:o=>{o.stopPropagation(),m({projectId:a,channelId:t})},children:e.jsx(R,{})})]})}];return e.jsxs("div",{children:[e.jsx(s,{title:()=>e.jsxs(y,{justify:"space-between",children:[e.jsx(f.Text,{children:"Channels"}),e.jsx(i,{type:"primary",onClick:()=>d(`/projects/${a}/channels/create`),icon:e.jsx(g,{})})]}),summary:()=>e.jsxs(s.Summary.Row,{children:[e.jsx(s.Summary.Cell,{index:0,colSpan:3,children:"Total"}),e.jsx(s.Summary.Cell,{index:1,children:n==null?void 0:n.length})]}),dataSource:n,columns:u,onRow:r=>({style:{cursor:"pointer"},onClick:t=>{console.debug("record:",r)}}),rowKey:"channelId",loading:l,tableLayout:"fixed"}),e.jsx(I,{})]})}export{J as default};
