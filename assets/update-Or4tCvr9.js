import{D as j,F as t,q as i,G as h,A as n,j as e,n as x,i as I,B as f}from"../web.js";import{C as b}from"./channel-BGoHa5Dv.js";import{P as y}from"./permission-D5ZL2PSw.js";import{I as g}from"./css-C3h7-5aW.js";import{u as v,c as l}from"./use-yup-params-p5E1rgJi.js";import"./index-Ca2pGdAr.js";import"./useBubbleLock-p8oIxmFz.js";import"./DownOutlined-BOejTe-8.js";import"./index-d5N8vm3K.js";import"./index-DzbnNVrb.js";import"./styleChecker-DjwUci1A.js";function D(){const c=j(),[o]=t.useForm(),{projectId:s,roleId:a}=v({projectId:l().required(),roleId:l().required()}),{data:m,isSuccess:p}=i(["project","get",s],()=>n.roles.get(s,a,{headers:{select:"roleId, name, permission, channelIds"}}),{enabled:s>0&&a>0,onSuccess(r){o.setFieldsValue(r)}}),{data:d=[]}=i(["project",s,"channels"],()=>n.channels.getList(s),{enabled:s>0}),{mutateAsync:u}=h(n.roles.update.bind(null,s,a),{onSuccess:()=>{c(`/projects/${s}`,{replace:!0})}});return e.jsx("div",{className:g,children:p&&e.jsx(x,{title:m.name,children:e.jsxs(t,{variant:"filled",form:o,onFinish:r=>{u(r)},layout:"vertical",children:[e.jsx(t.Item,{label:"Role 이름",name:"name",children:e.jsx(I,{})}),e.jsx(t.Item,{label:"권한",name:"permission",children:e.jsx(y,{})}),e.jsx(t.Item,{label:"채널",name:"channelIds",children:e.jsx(b,{channels:d})}),e.jsx(f,{type:"primary",htmlType:"submit",children:"Apply"})]})})})}export{D as default};
