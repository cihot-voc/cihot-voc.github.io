import{u as E,a as D,r as f,q as m,b as V,j as e,F as y,c as d,I as P,B as n,L as x,T as C,d as I}from"../web.js";import{A as k,d as N}from"./dayjs.min-CToE11c2.js";import{l as S}from"./css-Dwe9CNOk.js";import{P as M,F,M as T}from"./Table-CLM2IXUY.js";import{S as z}from"./index-RTFnNPgs.js";import"./index-BIS5sDnV.js";import"./index--sEWkCeX.js";import"./index-DGl8csmz.js";const A=()=>{const o=E(),l=D(),r=f.useMemo(()=>m.parse(l.search.slice(1)),[l]);return{to:o,location:l,search:r,setSearch:c=>o("?"+m.stringify({...r,...c}),{replace:!0})}},{Content:$}=x;function G(){var p,g,h;const{to:o,search:l,setSearch:r}=A(),{data:t,isLoading:c,isSuccess:b,refetch:u}=V({...l});f.useEffect(()=>{u({cancelRefetch:!0})},[l,u]);const w=b?e.jsxDEV(M,{total:t.pagination.totalCount},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:28,columnNumber:38},this):null,v=[{title:"ID",dataIndex:"id",width:80},{title:"제목",dataIndex:"title",width:300},{title:"상태",dataIndex:"status",width:100},{title:"사용자",dataIndex:"authorUser",width:100,render:s=>e.jsxDEV(k,{src:s.avatar},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:51,columnNumber:16},this)},{title:"시간",dataIndex:"createdAt",width:"7em",render:(s,i)=>e.jsxDEV(e.Fragment,{children:e.jsxDEV(C,{title:N(i.updatedAt).format(`MM-DD
hh:mm`),children:N(s).format("MM-DD hh:mm")},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:70,columnNumber:11},this)},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:69,columnNumber:9},this)},{title:"관리",dataIndex:"id",width:100,render:s=>e.jsxDEV(z,{direction:"horizontal",children:[e.jsxDEV(n,{size:"small",onClick:()=>{o(`${s}`)},children:"수정"},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV(n,{size:"small",type:"link",danger:!0,onClick:()=>{T.confirm({content:`삭제 id - ${s}`,okText:"삭제",okButtonProps:{type:"dashed",danger:!0},onOk:async()=>{await I.delete("/post",{params:{ids:[s]}}),await u()}})},children:"삭제"},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:80,columnNumber:11},this)}],j=(s,i,a)=>{console.debug({pagination:s,filters:i,sorter:a})};return e.jsxDEV("div",{className:S,children:[e.jsxDEV(y,{justify:"space-between",children:[e.jsxDEV(d,{onFinish:s=>void r(s),layout:"inline",children:[e.jsxDEV(d.Item,{name:"keyword",children:e.jsxDEV(P,{name:"keyword"},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:155,columnNumber:13},this)},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:154,columnNumber:11},this),e.jsxDEV(d.Item,{children:e.jsxDEV(n,{htmlType:"submit",children:"검색"},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:158,columnNumber:13},this)},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:157,columnNumber:11},this)]},void 0,!0,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:153,columnNumber:9},this),e.jsxDEV(n,{type:"primary",onClick:()=>{o("create")},children:"등록"},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:161,columnNumber:9},this)]},void 0,!0,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:152,columnNumber:7},this),b&&e.jsxDEV(x,{children:e.jsxDEV($,{children:[w,e.jsxDEV(F,{size:"small",loading:c,columns:v,rowKey:"id",pagination:{position:["bottomCenter"],current:(p=t==null?void 0:t.pagination)==null?void 0:p.currentPage,total:(g=t==null?void 0:t.pagination)==null?void 0:g.totalCount,pageSize:(h=t==null?void 0:t.pagination)==null?void 0:h.perPage,onChange(s,i){console.debug({page:s,pageSize:i}),console.debug(m.stringify({currentPage:s,perPage:i})),o(`/posts?${m.stringify({currentPage:s,perPage:i})}`,{replace:!0})},pageSizeOptions:[10,50,100,500,1e3],defaultPageSize:10},dataSource:t==null?void 0:t.posts,onRow:s=>({style:{cursor:"pointer"},onClick(i){const a=i.target;if(a instanceof HTMLElement&&a.matches(".ant-input *, .ant-btn *")){i.preventDefault();return}o(`./${s.id}`)}}),onChange:j},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:174,columnNumber:13},this)]},void 0,!0,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:172,columnNumber:11},this)},void 0,!1,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:171,columnNumber:9},this)]},void 0,!0,{fileName:"/web/src/pages/blog/post/list.tsx",lineNumber:137,columnNumber:5},this)}export{G as default};
