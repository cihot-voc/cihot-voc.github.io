import{r as l,I as p,_ as C,j as e,B as r,h as T,l as S,R as f,n as j}from"../web.js";var A={icon:function(n,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:t}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},B=function(n,t){return l.createElement(p,C({},n,{ref:t,icon:A}))},g=l.forwardRef(B);let x=1,c=[],d=[];const u=()=>{for(const s of d)s()},k=s=>(d=[...d,s],()=>{d=d.filter(n=>n!==s)}),R=()=>c,a={addTodo(){c=[...c,{id:x,text:"Todo #"+x}],x++,u()},pop(){c=c.slice(0,-1),u()},remove(s){c=c.filter(n=>n.id!==s),u()}},w=()=>({todos:l.useSyncExternalStore(k,R),addTodo:a.addTodo,pop:a.pop,remove:a.remove}),v=s=>s==="A"?"B":"A";function I(){const[s,n]=l.useState("A"),[t,i]=l.useState(0);return e.jsxs("div",{children:[e.jsx("h2",{children:"DependashPage"}),e.jsxs("div",{children:[e.jsxs(r,{onClick:()=>n(v),children:["Toggle to ",v(s)]}),e.jsxs(r,{onClick:()=>i(o=>o+1),children:["Count: ",t]}),e.jsx(r,{onClick:()=>b(),children:"Add todo"})]}),e.jsx("div",{children:s==="A"?e.jsx(y,{count:t}):s==="B"?e.jsx(z,{count:t}):null})]})}const b=()=>{a.addTodo()},m=T`
  border: 1px solid #777;
  padding: 8px;
  margin: 8px;
`;function y(s){const{data:n,isLoading:t,isRefetching:i,refetch:o}=S("todos",()=>new Promise(h=>setTimeout(()=>h(Array.from({length:j.random(10,20)},()=>j.random(10,20))),1e3)),{initialData:[],onSuccess:h=>{console.log("data",h)},refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,onSettled:()=>{if(console.debug("onSettled"),i)return[]}});return e.jsxs("div",{className:m,children:[e.jsx("h3",{children:"A"}),e.jsx("div",{children:e.jsx(r,{onClick:()=>o(),children:"refetch"})}),e.jsxs("div",{children:["count: ",s.count]}),e.jsxs("div",{children:["isLoading: ",t?e.jsx(f,{}):e.jsx(g,{})]}),e.jsxs("div",{children:["isRefetching: ",i?e.jsx(f,{}):e.jsx(g,{})]}),e.jsx("div",{children:n==null?void 0:n.length}),e.jsx("div",{children:JSON.stringify(n)})]})}function z(s){const{todos:n,remove:t}=w(),i=n.map(o=>e.jsxs("div",{children:[JSON.stringify(o),e.jsx(r,{onClick:()=>t(o.id),children:"Remove"})]},o.id));return e.jsxs("div",{className:m,children:[e.jsx("h3",{children:"B"}),e.jsxs("div",{children:["count: ",s.count]}),e.jsx("div",{children:i})]})}export{I as default};
