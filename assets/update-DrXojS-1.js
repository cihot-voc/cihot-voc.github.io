import{H as j,F as a,l,K as h,A as n,j as e,q as x,i as I,B as f}from"../web.js";import{C as b}from"./channel-B5aFHDk5.js";import{P as y}from"./permission-BUB8cXO8.js";import{I as g}from"./css-C3h7-5aW.js";import{u as v,c as i}from"./use-yup-params-Dnhb_jxx.js";import"./index-YURHDDc0.js";import"./useBubbleLock-CGne4fs5.js";import"./DownOutlined-BOejTe-8.js";import"./index-CEei4g-w.js";import"./styleChecker-Dm5BrqJD.js";function $(){const c=j(),[o]=a.useForm(),{projectId:s,roleId:t}=v({projectId:i().required(),roleId:i().required()}),{data:m,isSuccess:d}=l(["project","get",s],()=>n.roles.get(s,t,{headers:{select:"roleId, name, permission, channelIds"}}),{enabled:s>0&&t>0,onSuccess(r){o.setFieldsValue(r)}}),{data:p=[]}=l(["project",s,"channels"],()=>n.channels.getList(s),{enabled:s>0}),{mutateAsync:u}=h(n.roles.update.bind(null,s,t),{onSuccess:()=>{c(`/projects/${s}`,{replace:!0})}});return e.jsx("div",{className:g,children:d&&e.jsx(x,{title:m.name,children:e.jsxs(a,{variant:"filled",form:o,onFinish:r=>{u(r)},layout:"vertical",children:[e.jsx(a.Item,{label:"Role 이름",name:"name",children:e.jsx(I,{})}),e.jsx(a.Item,{label:"권한",name:"permission",children:e.jsx(y,{})}),e.jsx(a.Item,{label:"채널",name:"channelIds",children:e.jsx(b,{channels:p})}),e.jsx(f,{type:"primary",htmlType:"submit",children:"Apply"})]})})})}export{$ as default};
