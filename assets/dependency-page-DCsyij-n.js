import{r as l,I as g,_ as v,j as e,d,c as w,g as y,h as f,i as h}from"../web.js";var E={icon:function(t,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:t}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:n}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:t}}]}},name:"check-circle",theme:"twotone"},D=function(t,n){return l.createElement(g,v({},t,{ref:n,icon:E}))},b=l.forwardRef(D);b.displayName="CheckCircleTwoTone";let u=1,c=[],o=[];const N=()=>{for(const s of o)s()},j=s=>(o=[...o,s],()=>{o=o.filter(t=>t!==s)}),V=()=>c,a={addTodo(){c=[...c,{id:u,text:"Todo #"+u}],u++,N()},pop(){c=c.slice(0,-1),N()},remove(s){c=c.filter(t=>t.id!==s),N()}},C=()=>({todos:l.useSyncExternalStore(j,V),addTodo:a.addTodo,pop:a.pop,remove:a.remove}),p=s=>s==="A"?"B":"A";function B(){const[s,t]=l.useState("A"),[n,r]=l.useState(0);return e.jsxDEV("div",{children:[e.jsxDEV("h2",{children:"DependashPage"},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:17,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(d,{onClick:()=>t(p),children:["Toggle to ",p(s)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:19,columnNumber:9},this),e.jsxDEV(d,{onClick:()=>r(i=>i+1),children:["Count: ",n]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:20,columnNumber:9},this),e.jsxDEV(d,{onClick:()=>T(),children:"Add todo"},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:22,columnNumber:9},this)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:18,columnNumber:7},this),e.jsxDEV("div",{children:s==="A"?e.jsxDEV(S,{count:n},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:24,columnNumber:33},this):s==="B"?e.jsxDEV(A,{count:n},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:24,columnNumber:75},this):null},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:24,columnNumber:7},this)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:16,columnNumber:5},this)}const T=()=>{a.addTodo()},x=w`
  border: 1px solid #777;
  padding: 8px;
  margin: 8px;
`;function S(s){const{data:t,isLoading:n,isRefetching:r,refetch:i}=y("todos",()=>new Promise(m=>setTimeout(()=>m(Array.from({length:h.random(10,20)},()=>h.random(10,20))),1e3)),{initialData:[],onSuccess:m=>{console.log("data",m)},refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,onSettled:()=>{if(console.debug("onSettled"),r)return[]}});return e.jsxDEV("div",{className:x,children:[e.jsxDEV("h3",{children:"A"},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:69,columnNumber:7},this),e.jsxDEV("div",{children:e.jsxDEV(d,{onClick:()=>i(),children:"refetch"},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:71,columnNumber:9},this)},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("div",{children:["count: ",s.count]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:73,columnNumber:7},this),e.jsxDEV("div",{children:["isLoading: ",n?e.jsxDEV(f,{},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:74,columnNumber:36},this):e.jsxDEV(b,{},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:74,columnNumber:58},this)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:74,columnNumber:7},this),e.jsxDEV("div",{children:["isRefetching: ",r?e.jsxDEV(f,{},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:75,columnNumber:42},this):e.jsxDEV(b,{},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:75,columnNumber:64},this)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:75,columnNumber:7},this),e.jsxDEV("div",{children:t==null?void 0:t.length},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:76,columnNumber:7},this),e.jsxDEV("div",{children:JSON.stringify(t)},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:77,columnNumber:7},this)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:68,columnNumber:5},this)}function A(s){const{todos:t,remove:n}=C(),r=t.map(i=>e.jsxDEV("div",{children:[JSON.stringify(i),e.jsxDEV(d,{onClick:()=>n(i.id),children:"Remove"},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:87,columnNumber:7},this)]},i.id,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:85,columnNumber:5},this));return e.jsxDEV("div",{className:x,children:[e.jsxDEV("h3",{children:"B"},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:92,columnNumber:7},this),e.jsxDEV("div",{children:["count: ",s.count]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:93,columnNumber:7},this),e.jsxDEV("div",{children:r},void 0,!1,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:94,columnNumber:7},this)]},void 0,!0,{fileName:"/web/src/tests/dependency-page.tsx",lineNumber:91,columnNumber:5},this)}export{B as default};
