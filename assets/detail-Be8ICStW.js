import{g as B,m as P,a as D,u as f,r as h,C as k,c as W,q as G,j as t,E as w,G as x,h as C,aC as R,l as U,T as $,B as _,az as O,v as q,aD as F,aE as J,O as V}from"../web.js";import{A as T}from"./index-BkK6py1q.js";import{d as X}from"./css-BRyxPvm2.js";import{S as K}from"./index-C-CKWqDQ.js";import"./index-CYjZiiai.js";const Q=e=>{const{componentCls:r,sizePaddingEdgeHorizontal:s,colorSplit:n,lineWidth:i,textPaddingInline:m,orientationMargin:c,verticalMarginInline:a}=e;return{[r]:Object.assign(Object.assign({},D(e)),{borderBlockStart:`${f(i)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:a,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${f(i)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${f(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${r}-with-text`]:{display:"flex",alignItems:"center",margin:`${f(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${f(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${r}-with-text-left`]:{"&::before":{width:`calc(${c} * 100%)`},"&::after":{width:`calc(100% - ${c} * 100%)`}},[`&-horizontal${r}-with-text-right`]:{"&::before":{width:`calc(100% - ${c} * 100%)`},"&::after":{width:`calc(${c} * 100%)`}},[`${r}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:m},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${f(i)} 0 0`},[`&-horizontal${r}-with-text${r}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${r}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:n,borderStyle:"dotted",borderWidth:`${f(i)} 0 0`},[`&-horizontal${r}-with-text${r}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${r}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${r}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${r}-with-text-left${r}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${r}-inner-text`]:{paddingInlineStart:s}},[`&-horizontal${r}-with-text-right${r}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${r}-inner-text`]:{paddingInlineEnd:s}}})}},Z=e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),ee=B("Divider",e=>{const r=P(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[Q(r)]},Z,{unitless:{orientationMargin:!0}});var te=function(e,r){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const re=e=>{const{getPrefixCls:r,direction:s,divider:n}=h.useContext(k),{prefixCls:i,type:m="horizontal",orientation:c="center",orientationMargin:a,className:l,rootClassName:b,children:u,dashed:j,variant:d="solid",plain:g,style:y}=e,p=te(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),o=r("divider",i),[S,E,I]=ee(o),M=!!u,N=c==="left"&&a!=null,H=c==="right"&&a!=null,Y=W(o,n==null?void 0:n.className,E,I,`${o}-${m}`,{[`${o}-with-text`]:M,[`${o}-with-text-${c}`]:M,[`${o}-dashed`]:!!j,[`${o}-${d}`]:d!=="solid",[`${o}-plain`]:!!g,[`${o}-rtl`]:s==="rtl",[`${o}-no-default-orientation-margin-left`]:N,[`${o}-no-default-orientation-margin-right`]:H},l,b),z=h.useMemo(()=>typeof a=="number"?a:/^\d+$/.test(a)?Number(a):a,[a]),A=Object.assign(Object.assign({},N&&{marginLeft:z}),H&&{marginRight:z});return S(h.createElement("div",Object.assign({className:Y,style:Object.assign(Object.assign({},n==null?void 0:n.style),y)},p,{role:"separator"}),u&&m!=="vertical"&&h.createElement("span",{className:`${o}-inner-text`,style:A},u)))},v=e=>{if(e===null)return e;const r=new Date(e);return isNaN(r.getTime())?null:G(r)},ne=({data:e})=>{var r,s;return t.jsxs("div",{className:ie,children:[t.jsx(T,{src:e.authorUser.avatar}),t.jsxs("div",{className:"right",children:[t.jsxs(w,{className:"info",children:[t.jsx(x,{className:"name",xs:24,md:12,children:e.authorUser.name}),t.jsx(x,{className:"datetime",xs:24,md:12,children:e.createdAt===e.updatedAt?(r=v(e.createdAt))==null?void 0:r.format("YYYY-MM-DD HH:mm 등록함"):(s=v(e.updatedAt))==null?void 0:s.format("YYYY-MM-DD HH:mm 수정함")})]}),t.jsx("div",{dangerouslySetInnerHTML:{__html:e.content??""}})]})]})},ie=C`
  display: flex;
  flex-direction: row;
  gap: 8px;
  margin-bottom: 8px;

  .right {
    flex-grow: 1;
  }

  .info {
    width: 100%;
    display: flex;
    justify-content: space-between;
  }

  img {
    max-width: clamp(10vw, 50%, 30vw);
  }
`,{Paragraph:oe}=$;function se({postId:e}){const{data:r,isSuccess:s,error:n}=R(e),i=U();return h.useEffect(()=>{console.debug({postId:e})},[e]),isNaN(e)?t.jsx("div",{children:"postId가 없습니다."}):n?t.jsx("div",{children:JSON.stringify(n)}):s?t.jsx("div",{className:ae,children:t.jsxs($,{children:[t.jsxs(oe,{type:"secondary",children:["공식 협의",t.jsx(_,{type:"link",onClick:()=>i("comments/create"),children:"글쓰기"})]}),r.map(m=>t.jsx(ne,{data:m},m.id))]})}):t.jsx(O,{})}const ae=C`
  padding: 8px;
  border: 2px solid #ff01;

  .title {
    font-weight: bold;
  }

  min-height: 10em;
`;function le(){return t.jsx("div",{className:de,children:t.jsx("div",{className:"title",children:"내부 협의"})})}const de=C`
  padding: 8px;
  border: 2px solid #ff01;

  .title {
    font-weight: bold;
  }

  min-height: 10em;
`,{Title:ce,Text:L}=$;function xe(){var u,j;const e=q(),r=Number(e.postId),[s,n]=h.useState(""),{data:i,isSuccess:m,isError:c,error:a}=F(r),l=h.useMemo(()=>{const d=i==null?void 0:i.content,g=document.createElement("div");return typeof d=="string"&&d.length&&(g.innerHTML=d),g},[i]),b=h.useMemo(()=>Array.from(l.querySelectorAll("img")),[l]);return h.useEffect(()=>{b.forEach(d=>{var y;const g=d.getAttribute("src")??"";if(g){const p=Number((y=g.match(/^\/*(\d+)$/))==null?void 0:y[1]);isNaN(p)===!1&&p>0&&(d.src="/loading.gif",n(l.innerHTML),J(p).then(o=>{if(o instanceof Blob){console.debug(o);const S=URL.createObjectURL(o);d.src=S,console.debug(l.innerHTML),n(l.innerHTML)}}).catch(o=>{console.error(o),d.src="/no-image.png",n(l.innerHTML)}))}}),console.debug("content",s)},[b,n,s,l.innerHTML]),c?t.jsx("pre",{children:JSON.stringify(a)}):m?(console.debug("----",i.content),t.jsxs("div",{className:X,children:[t.jsxs($,{children:[t.jsx(ce,{level:3,children:i.title}),t.jsxs(w,{gutter:[24,8],children:[t.jsx(x,{xs:24,sm:12,children:t.jsxs(K,{children:[t.jsx(T,{src:i.authorUser.avatar}),t.jsx(L,{type:"secondary",children:i.authorUser.name})]})}),t.jsx(x,{xs:24,sm:12,children:t.jsx(L,{type:"secondary",children:i.createdAt===i.updatedAt?(u=v(i.createdAt))==null?void 0:u.format("YYYY-MM-DD HH:mm 등록"):(j=v(i.updatedAt))==null?void 0:j.format("YYYY-MM-DD HH:mm 등록")})})]}),l.innerHTML?t.jsx("div",{className:"content",dangerouslySetInnerHTML:{__html:l.innerHTML}}):t.jsx("div",{className:"no-content",children:"내용 없음"})]}),t.jsx(re,{}),t.jsx(V,{}),t.jsxs(w,{gutter:[8,8],children:[t.jsx(x,{xs:24,md:12,children:t.jsx(se,{postId:r})}),t.jsx(x,{xs:24,md:12,children:t.jsx(le,{})})]})]})):t.jsx(O,{})}export{xe as default};
