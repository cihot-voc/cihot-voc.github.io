import{bt as j,bp as f,bJ as v,bK as I,bu as N,bk as C,bv as E,r as L,bw as P,be as s,bd as w,bm as e,br as l,bz as F,bb as d,B as Q,bs as T}from"../app.js";import{Q as A}from"./quill-editor-C3GjLQWT.js";import{C as J,s as m}from"./index-MVs-lWsG.js";import{h as O}from"./index-tkF0NajM.js";function M(){const[b]=j(),p=f();console.debug("useNavigationType",v()),console.debug("useNavigation",I());const{id:r}=N(),n=r!==void 0,u=n?"put":"post",{refetch:h}=C(),{data:a}=E(),x=L.useMemo(()=>Array.isArray(a)?a.map(({id:o,name:t})=>({label:t,value:o})):[],[a]),{data:g,isLoading:c,isError:y,error:i}=P(["blog",r],async()=>l.get(`/post/${r}`),{enabled:n});return y?s.jsx("pre",{children:i==null?void 0:i.error}):c?s.jsx(w,{}):s.jsx(J,{title:`게시글 등록 ${u} ${c?"...":""}`,className:S,bordered:!0,children:s.jsxs(e,{initialValues:g,layout:"vertical",form:b,onFinish:o=>{l[u]("/post",o).then(t=>{m.success(s.jsx(F.Paragraph,{ellipsis:{rows:3},style:{maxWidth:"90vw"},children:JSON.stringify(t)})),h(),p("..")}).catch(t=>m.error(JSON.stringify(t)))},children:[s.jsx(e.Item,{name:"id",hidden:!0,children:s.jsx(d,{})}),s.jsx(e.Item,{name:"title",label:"제목",rules:[{required:!0}],children:s.jsx(d,{tabIndex:1,autoFocus:!0})}),s.jsx(e.Item,{name:"categories",initialValue:[],children:s.jsx(O.Group,{options:x})}),s.jsx(e.Item,{name:"content",label:"내용",rules:[{required:!0}],children:s.jsx(A,{theme:"snow",tabIndex:1})}),s.jsx(e.Item,{children:s.jsx(Q,{htmlType:"submit",children:"저장"})})]})})}const S=T`
  margin: 2em;
`;export{M as default};
