import{D as x,q as h,G as j,j as e,N as y,B as i,P as f,O as g,A as c}from"../web.js";import{u as I,c as C}from"./use-yup-params-p5E1rgJi.js";import{a as k}from"./render-8vBP4ikl.js";import{F as o}from"./Table-Qq_R4DkJ.js";import{T as w}from"./index-DzbnNVrb.js";import{R as A}from"./EditFilled-CAVP73L2.js";import{R}from"./DeleteFilled-CRc1QtDf.js";import"./index-XZoU7LEC.js";import"./DownOutlined-BOejTe-8.js";import"./styleChecker-DjwUci1A.js";import"./index-AROoAIfj.js";import"./dropdown-QIiZhNxb.js";import"./index-d5N8vm3K.js";import"./index-Ca2pGdAr.js";import"./useBubbleLock-p8oIxmFz.js";import"./index-D1GW4F26.js";function M(){const d=x(),{projectId:a}=I({projectId:C().required()}),{data:r,isLoading:l,refetch:p}=h("getChannels",()=>c.channels.getList(a),{initialData:[]}),{mutateAsync:m}=j(({projectId:n,channelId:t})=>c.channels.delete(n,t),{onSuccess:()=>{p()}}),u=[{key:"channelId",title:"ID",dataIndex:"channelId",width:50},{key:"name",title:"Name",dataIndex:"name"},{key:"updatedAt",title:"시간",dataIndex:"updatedAt",render:k,width:140},{key:"actions",width:80,render:(n,{channelId:t})=>e.jsxs(e.Fragment,{children:[e.jsx(i,{type:"link",onClick:s=>{s.stopPropagation(),d(`/projects/${a}/channels/${t}/update`)},children:e.jsx(A,{})}),e.jsx(i,{type:"link",danger:!0,onClick:s=>{s.stopPropagation(),m({projectId:a,channelId:t})},children:e.jsx(R,{})})]})}];return e.jsxs("div",{children:[e.jsx(o,{title:()=>e.jsxs(y,{justify:"space-between",children:[e.jsx(w.Text,{children:"Channels"}),e.jsx(i,{type:"primary",onClick:()=>d(`/projects/${a}/channels/create`),icon:e.jsx(f,{})})]}),summary:()=>e.jsxs(o.Summary.Row,{children:[e.jsx(o.Summary.Cell,{index:0,colSpan:3,children:"Total"}),e.jsx(o.Summary.Cell,{index:1,children:r==null?void 0:r.length})]}),dataSource:r,columns:u,onRow:n=>({style:{cursor:"pointer"},onClick:t=>{console.debug("record:",n)}}),rowKey:"channelId",loading:l,tableLayout:"fixed"}),e.jsx(g,{})]})}export{M as default};
