import{r as l,l as o,D as m,E as t,A as p,j as a,R as g,G as k,O as x}from"../web.js";function I(){const n=l.useRef(0),{data:e,isLoading:u}=o("token",()=>t.getItem("token"),{refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:s,isLoading:r}=o("updatedToken",p.auth.verify,{enabled:e!==null&&Date.now()-n.current>m.timestamp.day,refetchOnMount:!0,refetchOnWindowFocus:!0,onSuccess:async({updated:i,updatedAccessToken:d,userId:c,email:f})=>{i&&(await t.setItem("token",d),await t.setItem("userId",c),await t.setItem("email",f))},onSettled:()=>{n.current=Date.now()}});return console.debug("updatedTokenData",s),u||r?a.jsx(g,{}):e===null||s===null?a.jsx(k,{}):a.jsx(x,{context:{token:e}})}export{I as default};
